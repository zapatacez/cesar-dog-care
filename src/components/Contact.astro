---
---
<section id="contact" class="py-24 bg-white relative overflow-hidden">
    <!-- Decoration -->
    <div class="absolute top-0 left-0 w-64 h-64 bg-fairfield-blue-50 rounded-full -translate-x-1/2 -translate-y-1/2 blur-3xl opacity-50"></div>

    <div class="max-w-xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center mb-12">
            <span class="text-fairfield-blue-600 font-semibold tracking-wide uppercase text-sm">Get in Touch</span>
            <h2 class="font-serif text-3xl md:text-4xl font-bold text-fairfield-blue-950 mt-2">Ready for a Sleepover?</h2>
            <div class="mt-4">
                <a href="mailto:cesar@cesardogcare.com" class="text-fairfield-blue-600 font-semibold hover:text-fairfield-blue-800 transition-colors">
                    cesar@cesardogcare.com
                </a>
            </div>
        </div>

        <div id="form-container">
            <form id="contact-form" class="space-y-6 bg-white p-8 md:p-10 rounded-3xl shadow-xl border border-fairfield-sand-100">
                <div>
                    <label for="name" class="block text-sm font-medium text-fairfield-sand-700 mb-1">Your Name</label>
                    <input type="text" id="name" name="name" class="w-full px-4 py-3 rounded-xl bg-warm-white border border-fairfield-sand-200 focus:border-fairfield-blue-400 focus:ring-2 focus:ring-fairfield-blue-100 outline-none transition-all" required placeholder="John Doe">
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="dog-name" class="block text-sm font-medium text-fairfield-sand-700 mb-1">Dog's Name</label>
                        <input type="text" id="dog-name" name="dog_name" class="w-full px-4 py-3 rounded-xl bg-warm-white border border-fairfield-sand-200 focus:border-fairfield-blue-400 focus:ring-2 focus:ring-fairfield-blue-100 outline-none transition-all" required placeholder="Buddy">
                    </div>
                    <div>
                        <label for="dates" class="block text-sm font-medium text-fairfield-sand-700 mb-1">Requested Dates</label>
                        <input type="text" id="dates" name="dates" class="w-full px-4 py-3 rounded-xl bg-warm-white border border-fairfield-sand-200 focus:border-fairfield-blue-400 focus:ring-2 focus:ring-fairfield-blue-100 outline-none transition-all" placeholder="Oct 12 - Oct 15">
                    </div>
                </div>

                <div>
                    <label for="message" class="block text-sm font-medium text-fairfield-sand-700 mb-1">Tell me about your pup</label>
                    <textarea id="message" name="message" rows="4" class="w-full px-4 py-3 rounded-xl bg-warm-white border border-fairfield-sand-200 focus:border-fairfield-blue-400 focus:ring-2 focus:ring-fairfield-blue-100 outline-none transition-all" placeholder="Breed, age, temperament..."></textarea>
                </div>

                <button type="submit" class="w-full py-4 px-6 rounded-full bg-fairfield-blue-600 text-white font-bold text-lg hover:bg-fairfield-blue-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                    Send Message to Cesar
                </button>
            </form>
            
            <p id="form-success" class="hidden mt-6 text-center text-green-600 font-medium bg-green-50 py-3 px-6 rounded-xl border border-green-100 animate-fade-in-up">
                Thanks! I'll get back to you shortly.
            </p>
        </div>
    </div>
</section>

<script>
    import { actions } from 'astro:actions';

    const form = document.getElementById('contact-form') as HTMLFormElement;
    const successMsg = document.getElementById('form-success');
    const submitBtn = form?.querySelector('button');

    if (form && successMsg && submitBtn) {
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const originalBtnText = submitBtn.innerText;
            submitBtn.innerText = 'Sending...';
            submitBtn.disabled = true;

            const formData = new FormData(form);
            const { error } = await actions.sendContact(formData);

            if (!error) {
                form.reset();
                successMsg.classList.remove('hidden');
                setTimeout(() => successMsg.classList.add('hidden'), 5000);
            } else {
                alert('Oops! Something went wrong. Please try again.');
            }

            submitBtn.innerText = originalBtnText;
            submitBtn.disabled = false;
        });
    }
</script>
